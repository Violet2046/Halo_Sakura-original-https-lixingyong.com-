import{d as v,s as c,_ as k}from"../main-2.4.3.min.js";import"../assets/_commonjsHelpers-042e6b4d.js";var E=Object.defineProperty,w=Object.getOwnPropertyDescriptor,$=(S,e,t,s)=>{for(var r=s>1?void 0:s?w(e,t):e,a=S.length-1,o;a>=0;a--)(o=S[a])&&(r=(s?o(e,t,r):o(r))||r);return s&&r&&E(e,t,r),r};class h{registerRealtimeClock(){const e=document.querySelector(".realtime-clock");if(!e)return;const t=e.querySelector(".clock-text"),s=e.getAttribute("data-format")||"datetime",r=e.getAttribute("data-use-12hour")==="true",a=c.translate("home.clock.weekdays","Sun,Mon,Tue,Wed,Thu,Fri,Sat"),o=typeof a=="string"?a.split(","):["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=()=>{const l=new Date;let i="";const u=l.getFullYear(),m=String(l.getMonth()+1).padStart(2,"0"),y=String(l.getDate()).padStart(2,"0");let f=l.getHours();const p=String(l.getMinutes()).padStart(2,"0"),g=String(l.getSeconds()).padStart(2,"0"),_=o[l.getDay()];let d="";r&&(d=f>=12?" PM":" AM",f=f%12||12);const b=String(f).padStart(2,"0");switch(s){case"time":i=`${b}:${p}:${g}${d}`;break;case"date":i=`${u}-${m}-${y}`;break;case"datetime":i=`${u}-${m}-${y} ${b}:${p}:${g}${d}`;break;case"datetime_week":(document.documentElement.lang||"zh").startsWith("zh")?i=`${u}-${m}-${y} 星期${_} ${b}:${p}:${g}${d}`:i=`${u}-${m}-${y} ${_} ${b}:${p}:${g}${d}`;break;default:i=`${u}-${m}-${y} ${b}:${p}:${g}${d}`}t.textContent=i};n(),setInterval(n,1e3)}registerArrowDown(){const e=document.querySelector(".headertop-down");e&&k(()=>import("../assets/font-awesome-animation.min-afdd40e2.js"),[]),e==null||e.addEventListener("click",()=>{var s;const t=((s=document.querySelector(".site-content"))==null?void 0:s.getBoundingClientRect().top)||0;window.scrollTo({top:t+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const e=document.querySelector(".bg-change-js");if(!e)return;const t=document.getElementById("bg-next"),s=document.getElementById("bg-prev"),r=(c.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let o=Number(e.getAttribute("data-currIndex"));r===0?o=Math.ceil(Math.random()*99):o=(o+1)%r,a(o)}),s==null||s.addEventListener("click",()=>{let o=Number(e.getAttribute("data-currIndex"));r===0?o=Math.ceil(Math.random()*99):o=(o-1+r)%r,a(o)});const a=o=>{const n=e.getAttribute("data-url");e.src=`${n}&t=${o}`,e.setAttribute("data-currIndex",`${o}`)}}registerBackgroundVideo(){const e=document.querySelector(".video-container");if(!e)return;e.insertAdjacentElement("afterbegin",document.createElement("video"));const t=e.querySelector(".video-status"),s=document.querySelector(".focusinfo"),r=document.querySelector(".home-wave"),a=e.querySelector(".video-play"),o=e.querySelector(".video-pause");let n;a==null||a.addEventListener("click",async()=>{t.innerHTML=c.translate("home.video.loading","正在载入视频 ..."),t.style.bottom="0",k(()=>import("../assets/video.es-db0fa9e7.js"),[]).then(l=>{var i;if(n){n.play();return}n=l.default(e.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(i=c.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:i.toString()}]}),n.on("loadeddata",()=>{t.style.bottom="-100px",r.style.bottom="-100px",s.style.top="-999px",a.style.display="none",o.style.display="block",n.play()}),n.on("play",()=>{t.style.bottom="-100px",r.style.bottom="-100px",s.style.top="-999px",a.style.display="none",o.style.display="block"}),n.on("pause",()=>{t.innerHTML=c.translate("home.video.statu_pause","已暂停 ..."),t.style.bottom="0",r.style.bottom="0",s.style.top="0",a.style.display="block",o.style.display="none"}),n.on("waiting",()=>{t.innerHTML=c.translate("home.video.statu_waiting","加载中 ..."),t.style.bottom="0"}),n.on("canplay",()=>{t.style.bottom="-100px"}),n.on("error",()=>{t.innerHTML=c.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{s.style.top="0",r.style.bottom="0",t.style.bottom="-100px",a.style.display="block",o.style.display="none",n.dispose(),n=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))},2e3)}),n.on("ended",()=>{s.style.top="0",r.style.bottom="0",t.style.bottom="-100px",a.style.display="block",o.style.display="none",n.dispose(),n=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))})}).catch(l=>{console.error(l),t.innerHTML=c.translate("home.video.statu_error","视频加载失败"),t.style.bottom="0",setTimeout(()=>{t.style.bottom="-100px"},2e3)})}),o==null||o.addEventListener("click",()=>{n&&n.pause()})}}$([v()],h.prototype,"registerRealtimeClock",1);$([v()],h.prototype,"registerArrowDown",1);$([v()],h.prototype,"registerBackgroundChangeEvent",1);$([v()],h.prototype,"registerBackgroundVideo",1);

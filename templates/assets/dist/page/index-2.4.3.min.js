import{d as w,_ as M,s as u}from"../main-2.4.3.min.js";import"../assets/_commonjsHelpers-042e6b4d.js";var T=Object.defineProperty,D=Object.getOwnPropertyDescriptor,_=(E,e,t,o)=>{for(var n=o>1?void 0:o?D(e,t):e,a=E.length-1,r;a>=0;a--)(r=E[a])&&(n=(o?r(e,t,n):r(n))||n);return o&&n&&T(e,t,n),n};class k{registerRealtimeClock(){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];let t=!1,o=null,n=null,a=null;const r=i=>{if(typeof i=="string"){const l=i.split(",").map($=>$.trim()).filter(Boolean);if(l.length>=e.length)return l.slice(0,e.length)}return e},s=i=>{if(t)return!0;t=!0;const l=()=>{const x=i.getAttribute("data-format")||"datetime",A=i.getAttribute("data-use-12hour")==="true",C=r(u.translate("home.clock.weekdays",e.join(","))),d=new Date,p=d.getFullYear(),g=String(d.getMonth()+1).padStart(2,"0"),f=String(d.getDate()).padStart(2,"0");let S=d.getHours();const b=String(d.getMinutes()).padStart(2,"0"),v=String(d.getSeconds()).padStart(2,"0"),L=C[d.getDay()]||e[d.getDay()];let y="";A&&(y=S>=12?" PM":" AM",S=S%12||12);const h=String(S).padStart(2,"0");let c="";switch(x){case"time":c=`${h}:${b}:${v}${y}`;break;case"date":c=`${p}-${g}-${f}`;break;case"datetime":c=`${p}-${g}-${f} ${h}:${b}:${v}${y}`;break;case"datetime_week":(document.documentElement.lang||"zh").startsWith("zh")?c=`${p}-${g}-${f} 星期${L} ${h}:${b}:${v}${y}`:c=`${p}-${g}-${f} ${L} ${h}:${b}:${v}${y}`;break;default:c=`${p}-${g}-${f} ${h}:${b}:${v}${y}`}i.textContent=c,i.setAttribute("data-text",c)};l(),a=window.setInterval(l,1e3);const $=()=>{a!==null&&(window.clearInterval(a),a=null),window.removeEventListener("sakura:refresh",$)};return window.addEventListener("sakura:refresh",$,{once:!0}),!0},m=()=>{if(t)return!0;const i=document.querySelector(".realtime-clock-glitch");if(!i)return!1;const l=s(i);return l&&o&&(o.disconnect(),o=null),l&&n&&(document.removeEventListener("DOMContentLoaded",n),n=null),l};m()||(n=()=>{m()&&(n=null)},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n,{once:!0}):n(),!t&&(o=new MutationObserver(()=>{m()&&(o==null||o.disconnect(),o=null)}),o.observe(document.body,{childList:!0,subtree:!0}),window.setTimeout(()=>{o&&(o.disconnect(),o=null)},1e4)))}registerArrowDown(){const e=document.querySelector(".headertop-down");e&&M(()=>import("../assets/font-awesome-animation.min-afdd40e2.js"),[]),e==null||e.addEventListener("click",()=>{var o;const t=((o=document.querySelector(".site-content"))==null?void 0:o.getBoundingClientRect().top)||0;window.scrollTo({top:t+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const e=document.querySelector(".bg-change-js");if(!e)return;const t=document.getElementById("bg-next"),o=document.getElementById("bg-prev"),n=(u.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));n===0?r=Math.ceil(Math.random()*99):r=(r+1)%n,a(r)}),o==null||o.addEventListener("click",()=>{let r=Number(e.getAttribute("data-currIndex"));n===0?r=Math.ceil(Math.random()*99):r=(r-1+n)%n,a(r)});const a=r=>{const s=e.getAttribute("data-url");e.src=`${s}&t=${r}`,e.setAttribute("data-currIndex",`${r}`)}}registerBackgroundVideo(){const e=document.querySelector(".video-container");if(!e)return;e.insertAdjacentElement("afterbegin",document.createElement("video"));const t=e.querySelector(".video-status"),o=document.querySelector(".focusinfo"),n=document.querySelector(".home-wave"),a=e.querySelector(".video-play"),r=e.querySelector(".video-pause");let s;a==null||a.addEventListener("click",async()=>{t.innerHTML=u.translate("home.video.loading","正在载入视频 ..."),t.style.bottom="0",M(()=>import("../assets/video.es-db0fa9e7.js"),[]).then(m=>{var i;if(s){s.play();return}s=m.default(e.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(i=u.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:i.toString()}]}),s.on("loadeddata",()=>{t.style.bottom="-100px",n.style.bottom="-100px",o.style.top="-999px",a.style.display="none",r.style.display="block",s.play()}),s.on("play",()=>{t.style.bottom="-100px",n.style.bottom="-100px",o.style.top="-999px",a.style.display="none",r.style.display="block"}),s.on("pause",()=>{t.innerHTML=u.translate("home.video.statu_pause","已暂停 ..."),t.style.bottom="0",n.style.bottom="0",o.style.top="0",a.style.display="block",r.style.display="none"}),s.on("waiting",()=>{t.innerHTML=u.translate("home.video.statu_waiting","加载中 ..."),t.style.bottom="0"}),s.on("canplay",()=>{t.style.bottom="-100px"}),s.on("error",()=>{t.innerHTML=u.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{o.style.top="0",n.style.bottom="0",t.style.bottom="-100px",a.style.display="block",r.style.display="none",s.dispose(),s=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))},2e3)}),s.on("ended",()=>{o.style.top="0",n.style.bottom="0",t.style.bottom="-100px",a.style.display="block",r.style.display="none",s.dispose(),s=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))})}).catch(m=>{console.error(m),t.innerHTML=u.translate("home.video.statu_error","视频加载失败"),t.style.bottom="0",setTimeout(()=>{t.style.bottom="-100px"},2e3)})}),r==null||r.addEventListener("click",()=>{s&&s.pause()})}}_([w()],k.prototype,"registerRealtimeClock",1);_([w()],k.prototype,"registerArrowDown",1);_([w()],k.prototype,"registerBackgroundChangeEvent",1);_([w()],k.prototype,"registerBackgroundVideo",1);
